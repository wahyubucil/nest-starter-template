# [NestJS](https://github.com/nestjs/nest) custom starter template repository

This template include :

- TypeORM
- PostgreSQL Database
- Config with .env (dotenv)
- Swagger API Docs
- Docker compose with PostgreSQL and Adminer
- Yarn

## Installation

```bash
$ git clone https://github.com/wahyubucil/nest-starter-template.git
$ cd nest-starter-template
$ yarn install
```

## How to use

### First setup

- Copy `.env.example` to `.env`

```bash
$ cp .env.example .env
```

- Change all config on `.env` to match your config. Remember this config uses PostgreSQL. If you want to change the database, change it on `ormconfig.js` at `type` option

### Running the app

```bash
# development
$ yarn run start:dev

# production mode
$ yarn run start:prod
```

### Module setup (Example: Dog module)

```bash
# Generate module
$ nest generate module module/dog

# Generate controller
$ nest generate controller module/dog

# Generate service
$ nest generate service module/dog
```

If you want to follow my example convention like method, property, or DTO, see `src/module/item`

### Database migration

- Create or edit entity on `src/entity`. For example, create a new entity called `DogEntity`
- Generate migration

```bash
$ yarn run migration:generate CreateDogTable
```

- Run migration

```bash
$ yarn run migration:run
```

- If you want to revert migration

```bash
$ yarn run migration:revert
```

### Swagger API Docs

Access your API Docs that generated by Swagger on browser with url : `/docs`

### Use Docker Compose (optional)

If you want to use Docker as database server and Adminer as database administration

```bash
# Start container
$ docker-compose up -d

# Stop container
$ docker-compose stop

# Remove container
$ docker-compose down
```

- To use Adminer, access it on `localhost:8080`
- Fill all the field with your config (it suppose to be same as your `.env` config). Except, change `host` to `db`

## Cleanup template

Remove all example module on the template

```bash
$ rm -rf src/module/item

$ rm -rf src/database/migration
# Don't worry to delete migration folder. It will be automatically generated every time you generate a new migration

$ rm -rf src/entity/item.entity.ts
```

Don't forget to remove imported module on `app.module.ts`

## Test

```bash
# unit tests
$ yarn run test

# e2e tests
$ yarn run test:e2e

# test coverage
$ yarn run test:cov
```
